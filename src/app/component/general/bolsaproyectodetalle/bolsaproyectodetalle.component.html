<div class="contenedorBody" [hidden]="bolsaproyecto.n_idgen_bolsaproyecto==0">

    <mat-card *ngIf="editdetalle">
        <h4>Agregar Detalle Bolsa</h4>
        <div class="contenedor">
            <mat-form-field>
                <input type="number" (keypress)="numberOnly($event)" matInput placeholder="Año Programado"
                    name="n_annioprograma" [disabled]="enablededit" #n_annioprograma="ngModel"
                    [(ngModel)]="detallebolsaedit.n_annioprograma" maxlength="4" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="text" matInput placeholder="Jefatura Asignada" name="c_areaasignada"
                    #c_areaasignada="ngModel" [(ngModel)]="detallebolsaedit.c_areaasignada" maxlength="10" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Costo Inversión"
                    name="n_costoinversion" #n_costoinversion="ngModel" [(ngModel)]="detallebolsaedit.n_costoinversion"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>

            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="PIA: Monto Presupuesto Inicial"
                    name="n_presupuestoinicial" #n_presupuestoinicial="ngModel"
                    [(ngModel)]="detallebolsaedit.n_presupuestoinicial" maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>

            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="PIM: Monto Programado en el Año"
                    name="n_montoprogramadoannio" #n_montoprogramadoannio="ngModel"
                    [(ngModel)]="detallebolsaedit.n_montoprogramadoannio" maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>

            <!--<mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Diferencia Total"
                    name="n_diferenciatotal" #n_diferenciatotal="ngModel" [(ngModel)]="detallebolsaedit.n_diferenciatotal"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>-->

            <mat-form-field>
                <input type="text" matInput placeholder="Observaciones" name="c_observaciones"
                    #c_observaciones="ngModel" [(ngModel)]="detallebolsaedit.c_observaciones" maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>


        </div>
        <h4>Montos Programados</h4>
        <div class="contenedor">
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Enero"
                    name="n_montoprogene" #n_montoprogene="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogene"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Febrero"
                    name="n_montoprogfeb" #n_montoprogfeb="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogfeb"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Marzo"
                    name="n_montoprogmar" #n_montoprogmar="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogmar"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Abril"
                    name="n_montoprogabr" #n_montoprogabr="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogabr"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Mayo"
                    name="n_montoprogmay" #n_montoprogmay="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogmay"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Junio"
                    name="n_montoprogjun" #n_montoprogjun="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogjun"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Julio"
                    name="n_montoprogjul" #n_montoprogjul="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogjul"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Agosto"
                    name="n_montoprogago" #n_montoprogago="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogago"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Setiembre"
                    name="n_montoprogset" #n_montoprogset="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogset"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Octubre"
                    name="n_montoprogoct" #n_montoprogoct="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogoct"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Noviembre"
                    name="n_montoprognov" #n_montoprognov="ngModel" [(ngModel)]="detallebolsaedit.n_montoprognov"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Diciembre"
                    name="n_montoprogdic" #n_montoprogdic="ngModel" [(ngModel)]="detallebolsaedit.n_montoprogdic"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
        </div>
        <h4>Montos Ejecutados</h4>
        <div class="contenedor">
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Enero"
                    name="n_montoejecene" #n_montoejecene="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecene"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Febrero"
                    name="n_montoejecfeb" #n_montoejecfeb="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecfeb"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Marzo"
                    name="n_montoejecmar" #n_montoejecmar="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecmar"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Abril"
                    name="n_montoejecabr" #n_montoejecabr="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecabr"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Mayo"
                    name="n_montoejecmay" #n_montoejecmay="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecmay"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Junio"
                    name="n_montoejecjun" #n_montoejecjun="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecjun"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Julio"
                    name="n_montoejecjul" #n_montoejecjul="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecjul"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Agosto"
                    name="n_montoejecago" #n_montoejecago="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecago"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Setiembre"
                    name="n_montoejecset" #n_montoejecset="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecset"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Octubre"
                    name="n_montoejecoct" #n_montoejecoct="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecoct"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Noviembre"
                    name="n_montoejecnov" #n_montoejecnov="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecnov"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Diciembre"
                    name="n_montoejecdic" #n_montoejecdic="ngModel" [(ngModel)]="detallebolsaedit.n_montoejecdic"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
        </div>
        <h4>Montos Reprogramados</h4>
        <div class="contenedor">
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Enero"
                    name="n_montoreprene" #n_montoreprene="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprene"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Febrero"
                    name="n_montoreprfeb" #n_montoreprfeb="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprfeb"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Marzo"
                    name="n_montoreprmar" #n_montoreprmar="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprmar"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Abril"
                    name="n_montoreprabr" #n_montoreprabr="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprabr"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Mayo"
                    name="n_montoreprmay" #n_montoreprmay="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprmay"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Junio"
                    name="n_montoreprjun" #n_montoreprjun="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprjun"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Julio"
                    name="n_montoreprjul" #n_montoreprjul="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprjul"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Agosto"
                    name="n_montoreprago" #n_montoreprago="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprago"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Setiembre"
                    name="n_montoreprset" #n_montoreprset="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprset"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Octubre"
                    name="n_montoreproct" #n_montoreproct="ngModel" [(ngModel)]="detallebolsaedit.n_montoreproct"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Noviembre"
                    name="n_montoreprnov" #n_montoreprnov="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprnov"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <input type="number" (keypress)="decimalOnly($event)" matInput placeholder="Diciembre"
                    name="n_montoreprdic" #n_montoreprdic="ngModel" [(ngModel)]="detallebolsaedit.n_montoreprdic"
                    maxlength="200" />
                <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
        </div>
        <div mat-dialog-actions>
            <button mat-button cdkFocusInitial (click)="guardardetalle()">
                <mat-icon color="accent">save</mat-icon>
                <span>Guardar</span>
            </button>
            <button mat-button cdkFocusInitial (click)="canceldetalle()">
                <mat-icon color="error">cancel</mat-icon>
                <span>Cancelar</span>
            </button>
        </div>
    </mat-card>


    <mat-form-field>
        <input matInput placeholder="Buscar" [(ngModel)]="textfilter" (keyup)="applyFilter($event.target.value)">
        <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
    <table mat-table [dataSource]="tabla" matSort class="mat-elevation-z8">
        <ng-container matColumnDef="editar">
            <th mat-header-cell *matHeaderCellDef> <button mat-icon-button color="accent" (click)="adddetalle(null)">
                    <mat-icon aria-label="Example icon-button with a heart icon">add</mat-icon>
                </button> </th>
            <td mat-cell *matCellDef="let element">
                <button mat-icon-button color="accent" (click)="adddetalle(element)">
                    <mat-icon aria-label="Example icon-button with a heart icon">edit</mat-icon>
                </button>
            </td>
        </ng-container>
        <ng-container matColumnDef="n_annioprograma">
            <th mat-header-cell *matHeaderCellDef color="error"> Año Programado </th>
            <td mat-cell *matCellDef="let element"> {{element.n_annioprograma}} </td>
        </ng-container>
        <ng-container matColumnDef="c_areaasignada">
            <th mat-header-cell *matHeaderCellDef color="error"> Área Asignada </th>
            <td mat-cell *matCellDef="let element"> {{element.c_areaasignada}} </td>
        </ng-container>
        <ng-container matColumnDef="n_costoinversion">
            <th mat-header-cell *matHeaderCellDef color="error"> Costo de Inversión </th>
            <td mat-cell *matCellDef="let element"> {{element.n_costoinversion}} </td>
        </ng-container>
        <ng-container matColumnDef="c_observaciones">
            <th mat-header-cell *matHeaderCellDef color="error"> Observaciones </th>
            <td mat-cell *matCellDef="let element"> {{element.c_observaciones}} </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <ng-template let-row matRowDef cdkVirtualFor [matRowDefColumns]="displayedColumns">
            <tr mat-row></tr>
        </ng-template>
        <ng-container matColumnDef="eliminar">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Eliminar </th>
            <td mat-cell *matCellDef="let element">
                <button mat-icon-button color="error" (click)="deletedetalle(element)">
                    <mat-icon aria-label="Example icon-button with a heart icon">delete</mat-icon>
                </button>
            </td>
        </ng-container>
    </table>
    <mat-paginator [pageSizeOptions]="pagin" showFirstLastButtons></mat-paginator>
</div>
<p [hidden]="bolsaproyecto.n_idgen_bolsaproyecto>0">Debe pulsar el botón guardar antes</p>